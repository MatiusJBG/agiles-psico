@page "/hotel/{id}"
@using Application.Interfaces
@using Core.Entities
@inject IHotelService HotelService
@inject NavigationManager NavigationManager

<link href="css/hotel-detail.css" rel="stylesheet" />

@if (hotel != null)
{
    <div class="hotel-detail-container">
        <div class="hotel-detail-card">
            <div class="hotel-detail-header">
                <button class="back-button" @onclick="GoBack">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h1>@hotel.Name</h1>
                <div class="rating">
                    @for (int i = 0; i < 4; i++)
                    {
                        <i class="fas fa-star @(i < hotel.StarRating ? "star-filled" : "star-empty")"></i>
                    }
                    <span class="rating-text">@hotel.StarRating estrellas</span>
                </div>
                <div class="hotel-price">
                    <span class="price-amount">$@hotel.PricePerNight.ToString("N0")</span>
                    <span class="price-period">/noche</span>
                </div>
            </div>

            <div id="hotel-carousel" class="carousel slide" data-bs-ride="carousel">
                <div class="carousel-inner">
                    @for (int i = 0; i < hotel.Images.Count; i++)
                    {
                        <div class="carousel-item @(i == 0 ? "active" : "")">
                            <img src="@hotel.Images[i]" class="d-block w-100" alt="Imagen de @hotel.Name">
                        </div>
                    }
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#hotel-carousel" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#hotel-carousel" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                </button>
            </div>

            <div class="hotel-detail-body">
                <div class="detail-section">
                    <h2><i class="fas fa-info-circle"></i> Descripción</h2>
                    <p>@hotel.Description</p>
                </div>

                <div class="detail-section">
                    <h2><i class="fas fa-map-marker-alt"></i> Ubicación</h2>
                    <p>@hotel.Location</p>
                    @* Aquí podrías integrar un mapa si lo deseas *@
                </div>

                <div class="detail-section">
                    <h2><i class="fas fa-comments"></i> Comentarios y Opiniones</h2>
                    <div class="comments-list">
                        @foreach (var comment in hotel.Comments)
                        {
                            <div class="comment">
                                <i class="fas fa-quote-left"></i>
                                <p>@comment</p>
                            </div>
                        }
                    </div>
                </div>

                <div class="detail-section">
                    <h2><i class="fas fa-globe"></i> Redes y Contacto</h2>
                    <div class="contact-links">
                        @if (!string.IsNullOrEmpty(hotel.Website))
                        {
                            <a href="@hotel.Website" target="_blank" class="contact-link website">
                                <i class="fas fa-globe"></i> Página Web
                            </a>
                        }
                        @if (!string.IsNullOrEmpty(hotel.SocialMedia))
                        {
                            <a href="@hotel.SocialMedia" target="_blank" class="contact-link social-media">
                                <i class="fab fa-facebook"></i> Redes Sociales
                            </a>
                        }
                    </div>
                </div>
            </div>
        </div>
    </div>
}
else
{
    <p>Cargando detalles del hotel...</p>
}

@code {
    [Parameter]
    public string Id { get; set; }

    private Hotel? hotel;

    protected override void OnInitialized()
    {
        if (!string.IsNullOrEmpty(Id))
        {
            hotel = HotelService.GetHotelById(Id);
        }
    }

    private void GoBack()
    {
        NavigationManager.NavigateTo("/hotels");
    }
}
